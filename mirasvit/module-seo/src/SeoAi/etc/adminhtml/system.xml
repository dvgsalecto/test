<?xml version="1.0" encoding="UTF-8"?>
<config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="urn:magento:module:Magento_Config:etc/system_file.xs">
    <system>
        <section id="seo_ai" showInDefault="1" showInWebsite="0" showInStore="0" type="text" translate="label" sortOrder="900">
            <label>SEO AI Helper</label>
            <tab>mirasvit</tab>
            <resource>Mirasvit_SeoAi::config_seoai</resource>
            <group id="general" showInDefault="1" showInWebsite="0" showInStore="0" sortOrder="10">
                <label>General Settings</label>
                <field id="is_enabled" translate="label" type="select" sortOrder="10" showInDefault="1" showInWebsite="0" showInStore="0">
                    <label>Enable SEO AI helper</label>
                    <source_model>Magento\Config\Model\Config\Source\Yesno</source_model>
                    <attribute type="comment">
                        Enable/disable SEO AI helper
                    </attribute>
                </field>

                <field id="openai_key" translate="label"  type="obscure"  sortOrder="10" showInDefault="1" showInWebsite="0" showInStore="0" >
                    <label>OpenAI Secret Key</label>
                    <backend_model>Magento\Config\Model\Config\Backend\Encrypted</backend_model>
                    <comment>
                        <![CDATA[
                        Generate an <a href="https://platform.openai.com/account/api-keys" target="_blank">OpenAI API key</a>.
                        You'll need to create an account if you don't have one.
                        ]]>
                    </comment>
                </field>
            </group>
        </section>
        <section id="seo_audit" showInDefault="1" showInWebsite="0" showInStore="0" type="text" translate="label" sortOrder="900">
            <label>SEO Audit</label>
            <tab>mirasvit</tab>
            <resource>Mirasvit_SeoAi::config_seoai</resource>
            <group id="ai_helper" showInDefault="1" showInWebsite="0" showInStore="0" sortOrder="90">
                <label>AI Helper</label>
                <field id="is_auto_fix_meta" translate="label" type="select" sortOrder="90" showInDefault="1" showInWebsite="0" showInStore="0">
                    <label>Fix meta-related issues with SEO AI Helper</label>
                    <source_model>Magento\Config\Model\Config\Source\Yesno</source_model>
                    <attribute type="comment">
                        If enabled the extension will try to automatically fix issues related to meta fields using SEO rewrites.
                    </attribute>
                    <if_module_enabled>Mirasvit_SeoAudit</if_module_enabled>
                </field>
                <field id="is_cron" translate="label" type="select" sortOrder="92" showInDefault="1" showInWebsite="0" showInStore="0">
                    <label>Enable cron task</label>
                    <depends>
                        <field id="is_auto_fix_meta">1</field>
                    </depends>
                    <source_model>Magento\Config\Model\Config\Source\Yesno</source_model>
                    <attribute type="comment">
                        Run SEO AI Helper on a cron basis. The cron task will be executed every 30 minutes
                    </attribute>
                    <if_module_enabled>Mirasvit_SeoAudit</if_module_enabled>
                </field>
                <field id="is_update" translate="label" type="select" sortOrder="95" showInDefault="1" showInWebsite="0" showInStore="0">
                    <label>Re-generate SEO rewrites</label>
                    <depends>
                        <field id="is_auto_fix_meta">1</field>
                    </depends>
                    <source_model>Magento\Config\Model\Config\Source\Yesno</source_model>
                    <attribute type="comment">
                        In some cases SEO rewrites for Meta fields might not match length recommendations for them.
                        If this option enabled the SEO AI Helper will continue regenerating SEO Rewrites in next run until they match recommended length.
                    </attribute>
                    <if_module_enabled>Mirasvit_SeoAudit</if_module_enabled>
                </field>
                <field id="is_include_store" translate="label" type="select" sortOrder="100" showInDefault="1" showInWebsite="0" showInStore="0">
                    <label>Add store informtion to context</label>
                    <depends>
                        <field id="is_auto_fix_meta">1</field>
                    </depends>
                    <source_model>Magento\Config\Model\Config\Source\Yesno</source_model>
                    <attribute type="comment">
                        If enabled the extension will add store name and description to prompts for generating meta fields data
                    </attribute>
                    <if_module_enabled>Mirasvit_SeoAudit</if_module_enabled>
                </field>
                <field id="store_description" translate="label" type="textarea" sortOrder="105" showInDefault="1" showInWebsite="1" showInStore="1">
                    <label>Store description</label>
                    <depends>
                        <field id="is_auto_fix_meta">1</field>
                        <field id="is_include_store">1</field>
                    </depends>
                    <attribute type="comment">
                        Describe in a few words what types of products your store is selling. This data is not required.
                    </attribute>
                    <if_module_enabled>Mirasvit_SeoAudit</if_module_enabled>
                </field>
                <depends>
                    <field id="seo_audit/general/is_enabled">1</field>
                    <field id="seo_ai/general/is_enabled">1</field>
                </depends>
            </group>
        </section>
    </system>
</config>
